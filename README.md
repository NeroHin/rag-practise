# RAG 實踐手冊

本專案旨在探索和實踐各種 RAG（檢索增強生成）技術，特別關注查詢優化和處理方面的技巧。

## 查詢優化技術

### 1. 查詢擴充（Query Expansion）

#### 方法說明
自動為原始查詢添加相關詞彙，包含同義詞、相關概念等，以提升檢索範圍。這個技術能夠彌補用戶查詢詞彙不足的問題，提高檢索的召回率。

#### 技術原理
- 使用詞彙擴展技術識別同義詞
- 利用知識圖譜找出相關概念
- 基於語義向量計算相似詞彙
- 結合領域知識進行概念擴展

#### 應用場景
- 提升檢索召回率
- 處理用戶查詢詞彙貧乏問題
- 跨語言檢索支援
- 專業術語擴展

#### 實際效果展示

原始查詢：「我想找關於胖橘貓咪的照片」

擴充結果：
- 橘色貓
- 橘貓照片
- 貓咪品種
- 寵物圖片
- 萌系貓咪

### 2. 查詢重寫（Query Rewrite）

#### 方法說明
自動優化使用者的原始查詢語句，使其更符合檢索系統的特性。這個技術能夠將自然語言查詢轉換為更精確的檢索詞彙，提升檢索效果。

#### 技術原理
- 使用 LLM 分析原始查詢的語意
- 識別關鍵詞並進行優化
- 去除冗餘詞彙，強化檢索核心概念
- 適應不同檢索系統的特性

#### 應用場景
- 語音轉文字查詢優化
- 口語化查詢正規化
- 多語言查詢統一
- 檢索系統適配

#### 實際效果展示

原始查詢：「請問醫師子宮肌瘤術後的飲食需要注意什麼」

重寫結果：「請問醫師，子宮肌瘤手術後的患者在飲食方面需要注意哪些事項，以避免并發症、加速恢復及保持身體健康？」

## 效能比較

在實驗中，我們比較了不同模型在查詢重寫任務上的表現：

- groq/llama-3.1-8b-instant: ~0.59 秒
- groq/llama-3.3-70b-versatile: ~0.65 秒

這些結果顯示，較小的模型在速度上可能具有優勢，但在輸出質量上可能需要進一步評估。

## 後續優化方向

1. 擴充更多查詢優化技術
   - HyDE（Hypothetical Document Embeddings）
   - 多輪查詢分解
   - 查詢意圖分類
   
2. 效能優化
   - 模型量化
   - 批次處理
   - 快取機制

3. 評估指標完善
   - 查詢相關性
   - 響應時間
   - 資源使用率

